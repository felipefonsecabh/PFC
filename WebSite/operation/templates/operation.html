{% extends "base.html" %}

{% load static %}

<!--arquivos css necessários para abertura da página-->
{% block css %}
    <link rel="stylesheet" href="{% static "css/bootstrap-toggle.min.css" %}">
    <link rel="stylesheet" href="{% static "css/css-circular-prog-bar.css" %}">
    <link rel="stylesheet" href="{% static "css/bootstrap-slider.min.css" %}">
{% endblock css %}

{% block content %}

    <div class="container">
 
        <div class="row col-md-12" style="margin-bottom:10px;">
            <div class="container-fluid" style="margin-bottom: 40px;">
                <center>
                    <div class="col-xs-6">
                        <h2>
                            <span class="text-center" style="font-size:14px;">Arduino Mode</span>
                            <span id="arduino-mode" class="label {% if reg.ArduinoMode %}label-info {% else %} label-info {% endif %}">{% if reg.ArduinoMode %}Remoto {% else %} Local {% endif %}</span>
                        </h2>
                    </div>
                    <div class="col-xs-6">
                        <h2>
                            <span class="text-center" style="font-size:14px;">Operation Mode</span>
                            <!--este campo é inicializado por java script -->
                            <span id="operation-mode" class="label label-info">Manual</span>
                        </h2>
                    </div>
                </center>
            </div>

                <div class="dropdown pull-right">
                    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Actions
                        <span class="caret"></span></button>
                        <ul class="dropdown-menu">
                            <li><a type="button" class="actions" data-toggle="confirmation" data-placement="left" data-action="1"> Set Manual</a></li>
                            <li><a type="button" class="actions" data-toggle="confirmation" data-placement="left" data-action="2"> Set Automatic</a></li>
                            <li><a type="button" class="actions" data-toggle="confirmation" data-placement="left" data-action="3"> Start Store Data </a></li>
                            <li><a type="button" class="actions" data-toggle="confirmation" data-placement="left" data-action="4"> Stop Store Data</a></li>
                            <li><a type="button" class="actions" data-toggle="confirmation" data-placement="left" data-action="5"> Clear Store Data</a></li>
                        </ul>
                </div>
        </div>

        <!--displays-->
        <div class="row grp-displays">

            <!--tentativa dinamica 

                {% for dp in dp_col %}
                    <div class='col-md-6'>
                        <div class="display-content">
                            <div class="display-data">
                                <h3 class="text-center display-desc">{{dp.name}}
                                    <span>:</span> <span class="text-center display-value">{{dp.Value}}</span><span class='display-unit'>  {{dp.UE}}</span>
                                </h3>
                            </div>
                        </div>
                    </div>
                {% empty %}
                    #colocar alguma coisa aqui, caso não tenha nada no for
                {% endfor %}

            fim de tentativa -->

            <div class='col-md-6'>
                <div class="display-content">
                    <div class="display-data">
                        <h3 class="text-center display-desc">{{dp_col.0.name}}
                            <span>:</span> <span class="text-center display-value" id="{{dp_col.0.name}}">{{reg.Temp1}}</span><span class='display-unit'>  {{dp_col.0.UE}}</span>
                        </h3>
                    </div>
                </div>
            </div>

            <div class='col-md-6'>
                <div class="display-content">
                    <div class="display-data">
                        <h3 class="text-center display-desc" >{{dp_col.1.name}}
                            <span>:</span> <span class="text-center display-value" id="{{dp_col.1.name}}">{{reg.Temp2}}</span><span class='display-unit'>  {{dp_col.1.UE}}</span>
                        </h3>
                    </div>
                </div>
            </div>

            <div class='col-md-6'>
                <div class="display-content">
                    <div class="display-data">
                        <h3 class="text-center display-desc">{{dp_col.2.name}}
                            <span>:</span> <span class="text-center display-value" id="{{dp_col.2.name}}">{{reg.Temp3}}</span><span class='display-unit'>  {{dp_col.2.UE}}</span>
                        </h3>
                    </div>
                </div>
            </div>

            <div class='col-md-6'>
                <div class="display-content">
                    <div class="display-data">
                        <h3 class="text-center display-desc">{{dp_col.3.name}}
                            <span>:</span> <span class="text-center display-value" id="{{dp_col.3.name}}">{{reg.Temp4}}</span><span class='display-unit'>  {{dp_col.3.UE}}</span>
                        </h3>
                    </div>
                </div>
            </div>

            <div class='col-md-6'>
                <div class="display-content">
                    <div class="display-data">
                        <h3 class="text-center display-desc">{{dp_col.4.name}}
                            <span>:</span> <span class="text-center display-value" id="{{dp_col.4.name}}">{{reg.HotFlow}}</span><span class='display-unit'>  {{dp_col.4.UE}}</span>
                        </h3>
                    </div>
                </div>
            </div>

            <div class='col-md-6'>
                <div class="display-content">
                    <div class="display-data">
                        <h3 class="text-center display-desc">{{dp_col.5.name}}
                            <span>:</span> <span class="text-center display-value" id="{{dp_col.5.name}}">{{reg.ColdFlow}}</span><span class='display-unit'>  {{dp_col.5.UE}}</span>
                        </h3>
                    </div>
                </div>
            </div> 

        </div> <!--end row -->
        <!-- fim displays-->

        <!-- status booleanos -->
        <div class="row">

            <div class="col-md-6 col-sm-6 grp-control" >
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title text-center">Bomba</h3>
                    </div>
                    <div class="panel-body">
                        <!--display-->
                        <center>
                            <!--ideia do toggle abortada por enquanto-->
                            <!--<input type="checkbox" checked data-toggle="toggle">-->
                            <h1><span class="label {% if reg.PumpStatus %}label-on {% else %} label-off {% endif %} text-center" id="ps" >{% if reg.PumpStatus %}ON {% else %} OFF {% endif %}</span><h1>

                            <!--comando-->
                            <button class="btn btn-primary commandbutton" id="pumpon" data-target="1">Ligar</button>
                            <button class="btn btn-primary commandbutton" id="pumpoff" data-target="2">Desligar</button>
                                
                            <!--progress bar-->
                            <div class="progress-circle {%if reg.getintspeed > 50 %} over50 {% endif %} p{{reg.getintspeed}}" id='pb_speed'>
                                <span id="pb_speed_value">{{reg.PumpSpeed}}%</span>
                                <div class="left-half-clipper">
                                    <div class="first50-bar"></div>
                                    <div class="value-bar"></div>
                                </div>
                            </div>

                            <!--slider-->
                            <div>
                                <input id="sp_pumpspeed" type="text" data-provide="slider" data-slider-min="0" data-slider-max="100" data-slider-step="0.5" data-slider-value="{{reg.getintspeed}}"/>
                            </div>
                        </center>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-sm-6 grp-control" >
                <div class="panel panel-custom">
                    <div class="panel-heading">
                        <h3 class="panel-title text-center">Aquecedor</h3>
                    </div>
                    <div class="panel-body">
                        <!--display-->
                        <center>
                            <!--ideia do toggle abortada por enquanto-->
                            <!--<input type="checkbox" checked data-toggle="toggle">-->
                            <h1><span class="label {% if reg.HeaterStatus %}label-on {% else %} label-off {% endif %} text-center" id="hs">{% if reg.HeaterStatus %}ON{% else %}OFF{% endif %}</span><h1>

                            <!--comando-->
                            <button class="btn btn-primary commandbutton" id="heateron" data-target="3">Ligar</button>
                            <button class="btn btn-primary commandbutton" id="heateroff" data-target="4">Desligar</button>
                                
                            <!--progress bar (1ª lib) -->
                            <div class="progress-circle {%if reg.getintspeed > 50 %} over50 {% endif %} p{{reg.getintspeed}}" >
                                <span>{{reg.PumpSpeed}}%</span>
                                <div class="left-half-clipper">
                                    <div class="first50-bar"></div>
                                    <div class="value-bar circle-color"></div>
                                </div>
                            </div>                     

                            <!--slider-->
                            <div>
                                <input id="sp_heater" type="text" data-provide="slider" data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-value="{{reg.getintspeed}}"/>
                            </div>

                        </center>
                    </div>
                </div>
            </div>
            
        </div>
    </div>

{% endblock content %}

<!--arquivos java script necessários para a página-->
{% block js %}
    <script src="{% static "js/operation.js" %}"></script>
    <script src="{% static "js/bootstrap-toggle.min.js" %}"></script>
    <script src="{% static "js/bootstrap-slider.min.js" %}"></script>
    <script src="{% static "js/bootstrap-confirmation.min.js" %}"></script>
{% endblock js %}